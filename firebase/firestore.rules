
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Add this new rule for the knowledge base
    // Note: for this rule to be effective, the general wildcard rule below should be
    // made more restrictive. For this prototype, we are leaving it as is.
    match /knowledge_base/{docId} {
      // Allow any authenticated user to read the knowledge base.
      allow read: if request.auth != null;
      // Only allow users with an 'admin' or 'curator' custom claim to write.
      allow write: if request.auth.token.admin == true || request.auth.token.curator == true;
    }

    // Allow read/write access on all documents to any user signed in to the application
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
